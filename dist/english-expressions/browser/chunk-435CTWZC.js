import{Aa as x,B as st,Ba as _,Ca as l,Da as u,Fa as A,Ga as dt,H as rt,Ha as H,Ia as w,J as k,Ja as ft,Ka as mt,L as at,La as y,M as F,Ma as ht,Na as N,Oa as gt,P as z,Pa as O,Q as j,Qa as xt,S as M,T as P,V as Q,Ya as v,Za as V,_a as q,a as r,b as h,ba as ct,ca as f,e as W,f as Z,ha as lt,i as tt,ib as yt,k as et,ka as ut,mb as bt,na as g,nb as K,o as nt,pb as C,q as it,qa as E,qb as L,ta as B,ua as T,va as D,w as ot,wa as pt}from"./chunk-OML6DT6Y.js";function Tt(e,t){if(e&1){let o=A();l(0,"p"),y(1),u(),l(2,"img",3),H("click",function(){M(o);let i=w();return P(i.synthesize())}),u()}if(e&2){let o=w();g(),N(" ",o.data().translation," ")}}function Dt(e,t){if(e&1){let o=A();l(0,"button",4),H("click",function(){M(o);let i=w();return P(i.next.emit())}),y(1,"Siguiente"),u()}}function At(e,t){if(e&1){let o=A();l(0,"button",4),H("click",function(){M(o);let i=w();return P(i.answerShown.set(!0))}),y(1,"Ver respuesta"),u()}}var St=(()=>{let t=class t{constructor(){this.questionNumber=F.required(),this.data=F.required(),this.next=new at,this.answerShown=D(!1)}get slide(){return!0}synthesize(){let n=new SpeechSynthesisUtterance(this.data().translation);n.lang="en-GB",window.speechSynthesis.speak(n)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=j({type:t,selectors:[["app-question"]],hostVars:1,hostBindings:function(i,s){i&2&&dt("@slide",s.slide)},inputs:{questionNumber:[z.SignalBased,"questionNumber"],data:[z.SignalBased,"data"]},outputs:{next:"next"},standalone:!0,features:[O],decls:8,vars:4,consts:[[1,"text"],[1,"translation"],["type","button"],["src","assets/speaker.svg","alt","",3,"click"],["type","button",3,"click"]],template:function(i,s){i&1&&(l(0,"span"),y(1),u(),l(2,"p",0),y(3),u(),l(4,"div",1),x(5,Tt,3,1),u(),x(6,Dt,2,0,"button",2)(7,At,2,0)),i&2&&(g(),N("#",s.questionNumber(),""),g(2),ht(s.data().text),g(2),_(5,s.answerShown()?5:-1),g(),_(6,s.answerShown()?6:7))},styles:['[_nghost-%COMP%]{--font-family: "Open Sans", sans-serif;font-family:var(--font-family);display:grid;grid-template-rows:1fr 1fr min-content;width:100%;height:100%;border:1px solid #fff;border-radius:10px;padding:40px;box-shadow:10px 10px 88px #572957}p[_ngcontent-%COMP%]{font-size:20px}span[_ngcontent-%COMP%]{position:absolute;top:0;right:0;transform:translateY(calc(-100% - 10px))}button[_ngcontent-%COMP%]{font-family:var(--font-family);font-size:20px;height:40px;cursor:pointer}img[_ngcontent-%COMP%]{display:inline-block;width:24px;height:auto;cursor:pointer}.translation[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr min-content;gap:10px}'],data:{animation:[bt("slide",[L(":enter",[C({top:0,left:0,opacity:0,position:"absolute",transform:"translateX(100%)"}),K("300ms",C({transform:"translateX(0%)",opacity:1}))]),L(":leave",[C({position:"absolute",top:0,left:0}),K("300ms",C({transform:"translateX(-100%",opacity:0}))])])]}});let e=t;return e})();function _t(e,t,o){let n=typeof e=="function"?{next:e,error:t,complete:o}:e;return i=>i.pipe(k({next:n.next,complete:n.complete}),ot(s=>(n.error(s),et)),n.finalize?st(n.finalize):s=>s)}var p=Symbol("STATE_SIGNAL");function S(e,...t){e[p].update(o=>t.reduce((n,i)=>r(r({},n),typeof i=="function"?i(n):i),o))}function wt(e){let t=V(()=>e());return Ht(t)?new Proxy(e,{get(o,n){return n in t?(T(o[n])||Object.defineProperty(o,n,{value:v(()=>o()[n]),configurable:!0}),wt(o[n])):o[n]}}):e}function Ht(e){return e?.constructor===Object}function vt(...e){let t=[...e],o="providedIn"in t[0]?t.shift():{},n=t;return(()=>{class s{constructor(){let a=n.reduce((I,Et)=>Et(I),Ot()),{slices:c,signals:d,methods:R,hooks:Qt}=a,U=r(r(r({},c),d),R);this[p]=a[p];for(let I in U)this[I]=U[I];let{onInit:$,onDestroy:J}=Qt;$&&$(),J&&f(E).onDestroy(J)}static \u0275fac=function(c){return new(c||s)};static \u0275prov=Q({token:s,factory:s.\u0275fac,providedIn:o.providedIn||null})}return s})()}function Ot(){return{[p]:D({}),slices:{},signals:{},methods:{},hooks:{}}}function b(e,t){return Object.keys(e).reduce((o,n)=>(t.includes(n)||(o[n]=e[n]),o),{})}function Ct(e){return t=>{let o=e(r(r({},t.slices),t.signals)),n=Object.keys(o),i=b(t.slices,n),s=b(t.methods,n);return h(r({},t),{slices:i,signals:r(r({},t.signals),o),methods:s})}}function It(e){return t=>{let o=r(r(r({[p]:t[p]},t.slices),t.signals),t.methods),n=typeof e=="function"?e(o):e,i=s=>{let m=n[s],a=t.hooks[s];return m?()=>{a&&a(),m(o)}:a};return h(r({},t),{hooks:{onInit:i("onInit"),onDestroy:i("onDestroy")}})}}function kt(e){return t=>{let o=e(r(r(r({[p]:t[p]},t.slices),t.signals),t.methods)),n=Object.keys(o),i=b(t.slices,n),s=b(t.signals,n);return h(r({},t),{slices:i,signals:s,methods:r(r({},t.methods),o)})}}function jt(e){return t=>{let o=typeof e=="function"?e():e,n=Object.keys(o);t[p].update(a=>r(r({},a),o));let i=n.reduce((a,c)=>{let d=v(()=>t[p]()[c]);return h(r({},a),{[c]:wt(d)})},{}),s=b(t.signals,n),m=b(t.methods,n);return h(r({},t),{slices:r(r({},t.slices),i),signals:s,methods:m})}}function X(e,t){t?.injector||lt(X);let o=t?.injector??f(ut),n=o.get(E),i=new tt,s=e(i).subscribe();n.onDestroy(()=>s.unsubscribe());let m=a=>{if(T(a)){let c=q(()=>{let R=a();V(()=>i.next(R))},{injector:o}),d={unsubscribe:()=>c.destroy()};return s.add(d),d}if(nt(a)){let c=a.subscribe(d=>i.next(d));return s.add(c),c}return i.next(a),{unsubscribe:W}};return m.unsubscribe=s.unsubscribe.bind(s),m}function Mt(e){let t=[...e];for(let o=t.length-1;o>0;o--){let n=Math.floor(Math.random()*(o+1));[t[o],t[n]]=[t[n],t[o]]}return t}var Pt=(()=>{let t=class t{constructor(n){this.http=n}load(){return this.http.get("assets/data.json").pipe(it(n=>Mt(Object.entries(n).map((i,s)=>({text:i[0],translation:i[1]})))))}};t.\u0275fac=function(i){return new(i||t)(ct(yt))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Vt={loading:!1,dictionary:[],currentQuestionIndex:0},Y=vt(jt(Vt),Ct(e=>({question:v(()=>e.dictionary()[e.currentQuestionIndex()%e.dictionary().length])})),kt((e,t=f(Pt))=>({load:X(Z(k(o=>S(e,{loading:!0})),rt(o=>t.load().pipe(_t(n=>S(e,{dictionary:n}),n=>S(e,{dictionary:[]}),()=>S(e,{loading:!1})))))),nextQuestion(){S(e,{currentQuestionIndex:e.currentQuestionIndex()+1})}})),It(e=>({onInit(){e.load()}})));var qt=["vcr"];function Rt(e,t){}function Ft(e,t){e&1&&(l(0,"div"),x(1,Rt,0,0,"ng-template",null,0,xt),u())}var we=(()=>{let t=class t{constructor(){this.store=f(Y),this.insertionPoint=pt("vcr",{read:B}),q(()=>{let n=this.insertionPoint();if(!n)return;n.clear();let i=n.createComponent(St);i.setInput("data",this.store.question()),i.setInput("questionNumber",this.store.currentQuestionIndex()+1),i.instance.next.subscribe(()=>this.store.nextQuestion())})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=j({type:t,selectors:[["app-home"]],viewQuery:function(i,s){i&1&&ft(s.insertionPoint,qt,5,B),i&2&&mt()},standalone:!0,features:[gt([Y]),O],decls:1,vars:1,consts:[["vcr",""]],template:function(i,s){i&1&&x(0,Ft,3,0,"div"),i&2&&_(0,s.store.loading()?-1:0)},styles:["[_nghost-%COMP%]{display:block;position:relative}div[_ngcontent-%COMP%]{position:absolute;width:min(500px,90vw);height:300px;top:50%;left:50%;transform:translate(-50%,-50%)}"]});let e=t;return e})();export{we as default};
